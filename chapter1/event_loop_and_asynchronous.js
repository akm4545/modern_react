{
    // 비동기 예시
    console.log(1)

    setTimeout(() => {
        console.log(2)
    }, 0)

    setTimeout(() => {
        console.log(1)
    }, 100)

    console.log(4)
}

{
    // 이벤트 루프
    // 자바스크립트 런타임 외부에서 자바스크립트의 비동기 실행을 돕기 위해 만들어진 장치

    // 호출 스택
    // 자바스크립트에서 수행해야 할 코드나 함수를 순차적으로 담아두는 스택

    // 실행 순서
    // 1. foo() 가 호출스택에 들어감
    // 2. foo() 내부의 console.log가 존재하므로 호출 스택에 들어감
    // 3. 2의 실행이 완료된 이후에 다음 코드로 넘어간 (아직 foo()는 존재)
    // 4. bar()가 호출 스택에 들어감
    // 5. bar() 내부에 console.log가 존재하므로 호출 스택에 들어감
    // 6. 5의 실행이 완료된 이후에 다음 코드로 넘어감(아직 foo(), bar() 존재)
    // 7. 더 이상 bar()에 남은 것이 없으므로 호출 스택에서 제거 (foo() 존재)
    // 8. baz()가 호출 스택에 들어감
    // 9. baz() 내부에 console.log가 존재하므로 호출 스택에 들어감
    // 10. 9의 실행이 완료된 이후에 다음 코드로 넘어감 (foo(), baz() 존재)
    // 11. baz()에 남은것이 없으므로 호출 스택에서 제거 (foo() 존재)
    // 12. foo()에 남은 것이 없으므로 호출 스택에서 제거
    // 13 호출 스택 비워짐
    function bar(){
        console.log('bar')
    }

    function baz(){
        console.log('baz')
    }

    function foo(){
        console.log('foo')
        bar()
        baz()
    }

    foo()

    // 호출 스택이 비어 있는지 여부를 확인하는 것 = 이벤트 루프
    // 이벤트 루프만의 단일 스레드 내부에서 호출 스택에서 수행해야 할 작업이 있는지 확인
    // 있으면 자바스크립트 엔진을 이용해 실행
    // 코드를 실행하는 것과 호출 스택이 비어있는지 확인하는것 모두 단일 스레드에서 발생
    // 두가지 작업이 동시에 일어날 수 없으며 한 스레드에서 순차적으로 발생

    // 비동기
    // 1. foo()가 호출 스택에 들어감
    // 2. foo()내부의 console.log가 호출 스택에 들어감
    // 3. 2의 실행 완료 후 다음 코드로 이동
    // 4. setTimeout(bar(), 0)이 호출 스택에 들어감
    // 5. 4에 대해 타이머 이벤트가 실행 태스크 큐로 들어가고 그 대신 바로 스택에서 제거
    // 6. baz()가 호출 스택에 들어감
    // 7. baz()내부의 console.log가 호출 스택에 들어감
    // 8. 7의 실행 완료 후 다음 코드로 넘어감
    // 9. baz() 제거
    // 10. foo() 제거
    // 11. 호출 스택 비워짐
    // 12. 이벤트 루프가 스택이 비워져 있는것을 확인 태스크 큐에 4번 내용이 있어 bar()를 호출 스택에 넣음
    // 13. bar() 내부의 console.log가 호출 스택에 들어감
    // 14. 13실행이 끝나고 다음 코드로 이동
    // 15. bar() 샂게
    function bar(){
        console.log('bar')
    }

    function baz(){
        console.log('baz')
    }

    function foo(){
        console.log('foo')

        setTimeout(bar(), 0) //setTimeout만 추가
        baz()
    }

    foo()
}